# Ввод данных с клавиатуры

В языке программирования ```Java``` есть несколько способов ввода данных с клавиатуры, например: ```BufferedReader```
и ```InputStreamReader```, класс ```Console```, устаревший ```DataInputStream```.

Однако для работы из IDE (а не все вышепечисленные способы работают из IDE IntelliJ IDEA/Eclipse) и избегания
дополнительного кода связанного с преобразованием типов в рамках данного курса рекомендуется пользоваться
классом ```Scanner```.

## Класс Scanner

Класс ```Scanner``` входит в пакет ```java.util``` стандартной библиотеки ```Java```. Этот класс позволяет считывать
различные типы данных, такие как строки, числа и другие, введенные пользователем.

### Основные шаги для ввода данных с клавиатуры

1. Импортировать класс ```Scanner```

```java
import java.util.Scanner;
```

2. Создать объект ```Scanner```

Для создания объекта ```Scanner```, передайте ```System.in``` в конструктор, чтобы указать, что ввод будет происходить с
клавиатуры.

```java
Scanner scanner = new Scanner(System.in);
```

3. Использовать методы класса ```Scanner``` для ввода данных.

- ```nextLine()``` - считывает строку (включая пробелы)
- ```nextInt()``` - считывает целое число
- ```nextDouble()``` считывает число с плавающей точкой (десятичное)

### [Пример №1](SimpleScannerMain.java)

```java
import java.util.Scanner;

public class SimpleScannerMain {
    public static void main(String[] args) {
        // Создаем объект Scanner для считывания данных с клавиатуры
        Scanner scanner = new Scanner(System.in);

        // Ввод строки
        System.out.print("Введите ваше имя: ");
        String name = scanner.nextLine();

        // Ввод целого числа
        System.out.print("Введите ваш возраст: ");
        Integer age = scanner.nextInt();

        // Ввод числа с плавающей точкой
        System.out.print("Введите ваш рост (в метрах): ");
        Double height = scanner.nextDouble();

        // Вывод данных
        System.out.println("Ваше имя: " + name);
        System.out.println("Ваш возраст: " + age);
        System.out.println("Ваш рост: " + height + " м");

        // Закрываем Scanner, чтобы освободить ресурсы
        scanner.close();
    }
}
```

### Ресурсы занимаемые Scanner и зачем его закрывать

Класс ```Scanner``` использует ресурсы, связанные с потоком ввода, который он читает. Когда ```Scanner``` создается с
использованием ```System.in``` (стандартный поток ввода), он занимает системные ресурсы, такие как файловые дескрипторы
и буферы. Эти ресурсы используются для чтения данных с клавиатуры или из других источников, например, файлов.

#### Зачем освобождать ресурсы ```Scanner```?

1. **Освобождение системных ресурсов.** При создании ```Scanner``` создается привязка к потоку, который использует
   системные ресурсы. Эти ресурсы ограничены, и их количество варьируется в зависимости от операционной системы.
   Если ```Scanner``` не закрыт, ресурсы останутся занятыми.
2. **Предотвращение утечек памяти**. Незакрытые потоки могут вести к утечкам памяти, так как они продолжают существовать
   в памяти и могут не освобождаться сборщиком мусора (**Garbage
   Collector**).
3. **Корректное завершение работы программы.** Когда ```Scanner``` закрыт, система может корректно завершить работу с
   потоком и освободить буферы. Это важно при работе с большими объемами данных, где неосвобожденные ресурсы могут
   повлиять на производительность и стабильность программы.

#### Что может произойти, если не освободить ресурсы ```Scanner```

1. **Утечка ресурсов**. Если ```Scanner``` не закрыт, система продолжает держать занятой память и файловые дескрипторы,
   что может привести к превышению лимитов на количество открытых потоков или файлов, установленных операционной
   системой.
2. **Ошибки и сбои**. В конечном итоге, если ресурсов не хватает, программа может выдавать ошибки, такие
   как ```IOException``` или ```OutOfMemoryError```. Это особенно критично для серверных приложений, которые должны
   работать стабильно в течение длительного времени.
3. **Замедление работы системы**. Утечки ресурсов могут привести к снижению производительности системы, так как
   операционная система тратит больше времени на управление и переключение контекста между большим количеством открытых
   потоков.
4. **Проблемы с доступом к ресурсам**. Если ресурсы не освобождаются, другие части программы или другие программы могут
   столкнуться с проблемами при попытке получить доступ к тем же ресурсам (например, к файлам).

#### Итого

Если не закрывать ```Scanner```, использующий ```System.in```, на небольших программах это может быть незаметно, но в
более сложных приложениях, работающих с множеством потоков или файлов, это приведет к накоплению ошибок, снижению
производительности и потенциальным сбоям.

## Класс Scanner является AutoCloseable

А это значит, что облегчить работу со ```Scanner``` может блок ```try-with-resources``` (Подброее об
этом [здесь](..%2Fintro18_try_with_recources%2Ftry_with_resources.md))

Блок ```try-with-resources``` гарантирует, что ресурсы будут закрыты автоматически после завершения блока ```try```, что
упрощает управление ресурсами и предотвращает утечки.

### [Пример №2](ScannerTryResourcesMain.java)

```java
import java.util.Scanner;

public class ScannerTryResourcesMain {
    public static void main(String[] args) {
        // Используем try-with-resources для автоматического закрытия Scanner
        try (Scanner scanner = new Scanner(System.in)) {
            // Ввод строки
            System.out.print("Введите ваше имя: ");
            String name = scanner.nextLine();

            // Ввод целого числа
            System.out.print("Введите ваш возраст: ");
            Integer age = scanner.nextInt();

            // Ввод числа с плавающей точкой
            System.out.print("Введите ваш рост (в метрах): ");
            Double height = scanner.nextDouble();

            // Вывод данных
            System.out.println("Ваше имя: " + name);
            System.out.println("Ваш возраст: " + age);
            System.out.println("Ваш рост: " + height + " м");
        } // Scanner будет автоматически закрыт здесь
    }
}
```

