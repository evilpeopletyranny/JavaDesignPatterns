# try-with-resources

```try-with-resources``` — это конструкция в Java, введенная в версии Java 7, предназначенная для упрощения управления
ресурсами, такими как файлы, сетевые соединения, базы данных и другие объекты, требующие явного освобождения ресурсов
после использования. Этот механизм обеспечивает автоматическое закрытие ресурсов, предотвращая утечки памяти и других
проблем, связанных с неправильным управлением ресурсами.

## Что такое ```try-with-resources```?

```try-with-resources``` — это расширение конструкции ```try-catch-finally```, которое позволяет автоматически закрывать
ресурсы после их использования. Ресурсами называются объекты, которые должны быть закрыты после использования для
освобождения системных ресурсов (например, файловые дескрипторы, сетевые сокеты и т.д.).

## Преимущества

Использование ```try-with-resources``` предоставляет несколько ключевых преимуществ:

- **Автоматическое закрытие ресурсов**: Нет необходимости явно закрывать ресурсы в блоке ```finally```, что снижает
  вероятность ошибок и утечек ресурсов.
- **Упрощение кода**: Код становится чище и короче, так как убираются повторяющиеся блоки ```finally```.
- **Безопасность**: Автоматическое закрытие ресурсов гарантирует, что ресурсы будут закрыты даже в случае возникновения
  исключений.
- **Поддержка нескольких ресурсов**: Возможность объявлять и управлять несколькими ресурсами одновременно.
- **Улучшенная обработка исключений**: Исключения, возникшие при закрытии ресурсов, могут быть обработаны более
  эффективно.

## Требования

Чтобы использовать ```try-with-resources```, необходимо:

- Ресурс должен реализовывать интерфейс ```AutoCloseable``` или ```Closeable``` (Всё что может и потенциально могло в
  стандартной библиотеке - их реализовывает):
    - ```AutoCloseable``` — базовый интерфейс, содержащий метод ```close()```.
    - ```Closeable``` — наследуется от ```AutoCloseable``` и добавляет спецификацию для потоков ввода-вывода.
- Ресурсы объявляются в заголовке блока ```try```.

## Синтаксис

Базовый синтаксис конструкции ```try-with-resources``` выглядит следующим образом:

```
try (ResourceType resource = new ResourceType()) {
    // Использование ресурса
} catch (ExceptionType e) {
    // Обработка исключений
}
```

Для нескольких ресурсов:

```
try (
    ResourceType1 resource1 = new ResourceType1();
    ResourceType2 resource2 = new ResourceType2()
) {
    // Использование ресурсов
} catch (ExceptionType e) {
    // Обработка исключений
}
```

### Уже знакомый [пример](FileReadMain.java) чтения

```java
public class Main {
    public static void main(String[] args) {
        String filePath = "0_introduction/src/oop/intro17_try_with_resources/text.txt"; // Путь к файлу

        try (var reader = new BufferedReader(new FileReader(filePath))) {
            // Попытка чтения из файла сопровождается возможным IOException
            String content = reader.readLine();

            System.out.println("Содержимое файла:");
            System.out.println(content);
        } catch (IOException e) {
            System.err.println("Ошибка при чтении файла: " + e.getMessage());
            e.printStackTrace();
        }
    }
}
```

### Уже знакомый [пример](FileWriteMain.java) записи

```java
public class Main {
    public static void main(String[] args) {
        String filePath = "0_introduction/src/oop/intro17_try_with_resources/text.txt"; // Путь к файлу
        String content = "Возможно вы захотите читать и/или сохранять данные в файл при выполнении лаборатоной работы."; // Содержимое для записи

        try (var writer = new BufferedWriter(new FileWriter(filePath))) {
            writer.write(content);

            System.out.println("Данные успешно записаны в файл.");
        } catch (IOException e) {
            System.err.println("Ошибка при записи в файл: " + e.getMessage());
            e.printStackTrace();
        }
    }
}
```
